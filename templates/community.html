<!--게시글 목록 페이지-->
{% extends "base.html" %}

{% block title %}커뮤니티{% endblock %}

{% block extra_css %}
<!--css-->
<link rel="stylesheet" href="{{ url_for('static', filename='css/community.css') }}">
{% endblock %}

{% block content %}
<div class="container">
  <!--게시글 목록 영역-->
  {% if posts and posts|length > 0 %}
    {% for p in posts %}
      <article class="preview-post" role="listitem">

      <!--작성자 프로필 영역-->
      <div class="cm-profile">
        <!--기본 프로필 이미지 처리-->
        <img src="{{ url_for('static', filename='images/profile.jpg') }}" alt="프로필" />
        
        <!--작성자 이름-->
        <span class="post-user">{{ p.username | default('익명') }}</span>
      </div>

      <!-- 상세 게시글 페이지 링크 -->
      <a class="post-link" href="{{ url_for('community.get_post_detail', post_id=p.postID) }}">
        <div class="cm-post">
          <h3 class="post-title">{{ p.postTitle }}</h3>

          <div class="cm-meta">
            <p class="post-content">{{ p.postContent }}</p>
            <span class="post-date">{{ p.postCreatedAt }}</span>
          </div>
        </div>
      </a>

      </article>
    {% endfor %}

  {% else %}

    <!-- 게시글 없을 때 표시-->
    <article class="preview-post empty">
      <div class="cm-profile">
        <img src="{{ url_for('static', filename='images/profile.jpg') }}" alt="프로필" />
        <span class="post-user">시스템</span>
      </div>
      
      <div class="cm-post">
        <h3 class="post-title">게시글이 없습니다</h3>
        <p class="post-content">첫 글을 작성해보세요!</p>
      </div>

    </article>
  {% endif %}
</div>

<!-- 글쓰기 페이지 이동 버튼 -->
  <a class="btn" href="{{ url_for('community.create_post_page') }}">글쓰기</a>
</div>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/community.js') }}"></script>
{% endblock %}
